<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Distributions for Ecologists</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #2c5530, #4a7c59);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: #2c5530;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            background: #4a7c59;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .nav-btn.active {
            background: #1a3d20;
        }

        .page {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            color: #2c5530;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #4a7c59;
            padding-bottom: 0.5rem;
        }

        .distribution-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .dist-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .dist-card:hover {
            border-color: #4a7c59;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .dist-card.active {
            border-color: #2c5530;
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
        }

        .dist-title {
            color: #2c5530;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .dist-description {
            color: #666;
            margin-bottom: 1rem;
        }

        .ecological-example {
            background: #f0f8f0;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #4a7c59;
            margin: 1rem 0;
        }

        .ecological-example h4 {
            color: #2c5530;
            margin-bottom: 0.5rem;
        }

        .formula-box {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .simulator-section {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-group {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .control-group label {
            display: block;
            color: #2c5530;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .control-group input {
            width: 100%;
            padding: 0.5rem;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 1rem;
        }

        .control-group input:focus {
            outline: none;
            border-color: #4a7c59;
        }

        .visualization-area {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .chart-container {
            width: 100%;
            height: 300px;
            position: relative;
        }

        .bar {
            display: inline-block;
            background: #4a7c59;
            margin: 0 2px;
            border-radius: 3px 3px 0 0;
            transition: all 0.3s ease;
        }

        .bar:hover {
            background: #2c5530;
        }

        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-box {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e9ecef;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c5530;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-box {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 5px solid #4a7c59;
        }

        .concept-box h3 {
            color: #2c5530;
            margin-bottom: 1rem;
        }

        .example-list {
            list-style: none;
            padding-left: 0;
        }

        .example-list li {
            background: white;
            margin: 0.5rem 0;
            padding: 0.75rem;
            border-radius: 5px;
            border-left: 3px solid #4a7c59;
        }

        .back-link {
            display: inline-block;
            background: #4a7c59;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: #2c5530;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-menu {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .distribution-cards {
                grid-template-columns: 1fr;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Probability Distributions for Ecologists</h1>
            <p class="subtitle">Understanding statistical distributions through ecological examples and interactive learning</p>
        </div>

        <div class="nav-menu">
            <button class="nav-btn active" onclick="showPage('overview', this)">Overview</button>
            <button class="nav-btn" onclick="showPage('discrete', this)">Discrete Distributions</button>
            <button class="nav-btn" onclick="showPage('continuous', this)">Continuous Distributions</button>
            <button class="nav-btn" onclick="showPage('simulator', this)">Interactive Simulator</button>
            <button class="nav-btn" onclick="showPage('applications', this)">Ecological Applications</button>
        </div>

        <!-- Overview Page -->
        <div class="page active" id="overview">
            <h2 class="page-title">Understanding Probability Distributions in Ecology</h2>
            
            <p>Probability distributions are mathematical functions that describe the likelihood of different outcomes in ecological studies. They help us model natural variability, make predictions, and understand patterns in biological data.</p>

            <div class="concept-grid">
                <div class="concept-box">
                    <h3>Why Distributions Matter in Ecology</h3>
                    <ul class="example-list">
                        <li><strong>Population counts:</strong> How many individuals in a quadrat?</li>
                        <li><strong>Survival times:</strong> How long do organisms live?</li>
                        <li><strong>Growth rates:</strong> How fast do populations grow?</li>
                        <li><strong>Species abundance:</strong> How are species distributed?</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>Key Concepts</h3>
                    <ul class="example-list">
                        <li><strong>Random Variable:</strong> A measurable outcome (e.g., tree height)</li>
                        <li><strong>Probability:</strong> Likelihood of an outcome (0 to 1)</li>
                        <li><strong>Parameters:</strong> Values that define the distribution shape</li>
                        <li><strong>Expected Value:</strong> The average outcome we expect</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>Types of Data</h3>
                    <ul class="example-list">
                        <li><strong>Discrete:</strong> Count data (number of species, individuals)</li>
                        <li><strong>Continuous:</strong> Measurement data (weight, height, time)</li>
                        <li><strong>Bounded:</strong> Data with limits (proportions, percentages)</li>
                        <li><strong>Unbounded:</strong> Data without theoretical limits</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Discrete Distributions Page -->
        <div class="page" id="discrete">
            <h2 class="page-title">Discrete Probability Distributions</h2>
            
            <p>Discrete distributions model count data - things you can enumerate like number of individuals, species, or events.</p>

            <div class="distribution-cards">
                <div class="dist-card" onclick="selectDistribution('binomial')">
                    <h3 class="dist-title">Binomial Distribution</h3>
                    <p class="dist-description">Models the number of successes in a fixed number of independent trials.</p>
                    
                    <div class="ecological-example">
                        <h4>🌱 Ecological Example:</h4>
                        <p>Out of 20 seeds planted, how many will germinate? If each seed has a 70% germination rate, we can model this with a binomial distribution (n=20, p=0.7).</p>
                    </div>

                    <div class="formula-box">
                        P(X = k) = C(n,k) × p^k × (1-p)^(n-k)
                        <br>Mean = np
                        <br>Variance = np(1-p)
                    </div>
                </div>

                <div class="dist-card" onclick="selectDistribution('poisson')">
                    <h3 class="dist-title">Poisson Distribution</h3>
                    <p class="dist-description">Models the number of events occurring in a fixed interval when events happen independently at a constant rate.</p>
                    
                    <div class="ecological-example">
                        <h4>🦋 Ecological Example:</h4>
                        <p>Counting butterflies visiting a flower patch per hour. If the average is 3 visits per hour, the number follows a Poisson distribution (λ=3).</p>
                    </div>

                    <div class="formula-box">
                        P(X = k) = (λ^k × e^(-λ)) / k!
                        <br>Mean = λ
                        <br>Variance = λ
                    </div>
                </div>

                <div class="dist-card" onclick="selectDistribution('negative_binomial')">
                    <h3 class="dist-title">Negative Binomial Distribution</h3>
                    <p class="dist-description">Models overdispersed count data - when variance exceeds the mean, common in ecological data.</p>
                    
                    <div class="ecological-example">
                        <h4>🐛 Ecological Example:</h4>
                        <p>Parasite counts on fish often show overdispersion - most fish have few parasites, but some have many. Negative binomial captures this clumped pattern better than Poisson.</p>
                    </div>

                    <div class="formula-box">
                        P(X = k) = C(k+r-1, k) × p^r × (1-p)^k
                        <br>Mean = r(1-p)/p
                        <br>Variance = r(1-p)/p²
                    </div>
                </div>
            </div>
        </div>

        <!-- Continuous Distributions Page -->
        <div class="page" id="continuous">
            <h2 class="page-title">Continuous Probability Distributions</h2>
            
            <p>Continuous distributions model measurement data - variables that can take any value within a range.</p>

            <div class="distribution-cards">
                <div class="dist-card" onclick="selectDistribution('normal')">
                    <h3 class="dist-title">Normal Distribution</h3>
                    <p class="dist-description">The famous bell curve. Many biological measurements approximately follow this distribution.</p>
                    
                    <div class="ecological-example">
                        <h4>🌳 Ecological Example:</h4>
                        <p>Tree heights in a forest often follow a normal distribution. If average height is 15m with standard deviation 3m, then 68% of trees are between 12-18m tall.</p>
                    </div>

                    <div class="formula-box">
                        f(x) = (1/(σ√(2π))) × e^(-½((x-μ)/σ)²)
                        <br>Mean = μ
                        <br>Variance = σ²
                    </div>
                </div>

                <div class="dist-card" onclick="selectDistribution('exponential')">
                    <h3 class="dist-title">Exponential Distribution</h3>
                    <p class="dist-description">Models waiting times between events or lifespans when failure rate is constant.</p>
                    
                    <div class="ecological-example">
                        <h4>⏱️ Ecological Example:</h4>
                        <p>Time between predator attacks, survival time of organisms under constant hazard, or intervals between mutations all follow exponential distributions.</p>
                    </div>

                    <div class="formula-box">
                        f(x) = λe^(-λx) for x ≥ 0
                        <br>Mean = 1/λ
                        <br>Variance = 1/λ²
                    </div>
                </div>

                <div class="dist-card" onclick="selectDistribution('lognormal')">
                    <h3 class="dist-title">Log-Normal Distribution</h3>
                    <p class="dist-description">When the logarithm of a variable is normally distributed. Common for size measurements.</p>
                    
                    <div class="ecological-example">
                        <h4>🐟 Ecological Example:</h4>
                        <p>Body masses, population sizes, and home range areas often follow log-normal distributions because growth processes are multiplicative rather than additive.</p>
                    </div>

                    <div class="formula-box">
                        f(x) = (1/(x×σ√(2π))) × e^(-½((ln(x)-μ)/σ)²)
                        <br>Mean = e^(μ + σ²/2)
                        <br>Variance = (e^(σ²) - 1) × e^(2μ + σ²)
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Simulator Page -->
        <div class="page" id="simulator">
            <h2 class="page-title">Interactive Distribution Simulator</h2>
            
            <div class="simulator-section">
                <h3>Choose a Distribution to Explore</h3>
                
                <div class="controls-grid">
                    <div class="control-group">
                        <label for="dist-select">Distribution Type:</label>
                        <select id="dist-select" onchange="updateSimulation()">
                            <option value="binomial">Binomial</option>
                            <option value="poisson">Poisson</option>
                            <option value="normal">Normal</option>
                            <option value="exponential">Exponential</option>
                        </select>
                    </div>
                    
                    <div class="control-group" id="param1-group">
                        <label for="param1" id="param1-label">Parameter 1:</label>
                        <input type="number" id="param1" value="10" min="1" max="100" step="1" oninput="updateSimulation()">
                    </div>
                    
                    <div class="control-group" id="param2-group">
                        <label for="param2" id="param2-label">Parameter 2:</label>
                        <input type="number" id="param2" value="0.5" min="0.01" max="0.99" step="0.01" oninput="updateSimulation()">
                    </div>
                    
                    <div class="control-group">
                        <label for="sample-size">Sample Size:</label>
                        <input type="number" id="sample-size" value="1000" min="100" max="10000" step="100" oninput="updateSimulation()">
                    </div>
                </div>

                <div class="visualization-area">
                    <div class="chart-container" id="chart-container">
                        <p>Click "Generate Sample" to see the distribution!</p>
                    </div>
                    
                    <button onclick="generateSample()" style="background: #2c5530; color: white; border: none; padding: 1rem 2rem; border-radius: 8px; font-size: 1rem; cursor: pointer; margin-top: 1rem;">
                        Generate New Sample
                    </button>
                </div>

                <div class="stats-display" id="stats-display">
                    <!-- Statistics will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Applications Page -->
        <div class="page" id="applications">
            <h2 class="page-title">Ecological Applications</h2>
            
            <div class="concept-grid">
                <div class="concept-box">
                    <h3>Population Ecology</h3>
                    <ul class="example-list">
                        <li><strong>Abundance surveys:</strong> Poisson for rare species counts</li>
                        <li><strong>Survival analysis:</strong> Exponential for constant mortality</li>
                        <li><strong>Growth rates:</strong> Normal for log-transformed data</li>
                        <li><strong>Dispersal distances:</strong> Exponential or log-normal</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>Community Ecology</h3>
                    <ul class="example-list">
                        <li><strong>Species richness:</strong> Negative binomial for quadrat counts</li>
                        <li><strong>Relative abundance:</strong> Log-normal for rank-abundance</li>
                        <li><strong>Co-occurrence:</strong> Binomial for presence/absence</li>
                        <li><strong>Diversity indices:</strong> Normal after transformation</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>Experimental Design</h3>
                    <ul class="example-list">
                        <li><strong>Power analysis:</strong> Normal for effect size estimation</li>
                        <li><strong>Sample size:</strong> Based on expected distribution</li>
                        <li><strong>Error rates:</strong> Binomial for Type I/II errors</li>
                        <li><strong>Replication:</strong> Accounts for natural variation</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>Conservation Biology</h3>
                    <ul class="example-list">
                        <li><strong>Extinction risk:</strong> Exponential for time to extinction</li>
                        <li><strong>Population viability:</strong> Normal for population projections</li>
                        <li><strong>Habitat quality:</strong> Various distributions for suitability</li>
                        <li><strong>Genetic diversity:</strong> Binomial for allele frequencies</li>
                    </ul>
                </div>
            </div>

            <div class="ecological-example" style="margin-top: 2rem;">
                <h4>🔬 Case Study: Modeling Bee Colony Collapse</h4>
                <p><strong>Problem:</strong> A researcher wants to model the probability of bee colony survival over winter.</p>
                <p><strong>Approach:</strong> Use exponential distribution to model survival times, where λ represents the hazard rate (higher λ = higher risk of collapse).</p>
                <p><strong>Application:</strong> If λ = 0.1 per month, then P(survival > 6 months) = e^(-0.1×6) ≈ 0.55 or 55% chance.</p>
                <p><strong>Management:</strong> Interventions that reduce λ (improve habitat, reduce pesticides) increase winter survival probability.</p>
            </div>
        </div>

        <a href="../index.html" class="back-link">← Back to Main Site</a>
    </div>

    <script>
        // Global variables
        let currentData = [];
        let currentDistribution = 'binomial';

        // Page navigation
        function showPage(pageId, buttonElement) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Add active class to clicked button
            if (buttonElement) {
                buttonElement.classList.add('active');
            }
        }

        // Distribution selection
        function selectDistribution(distType) {
            document.querySelectorAll('.dist-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Optionally switch to simulator
            if (confirm('Switch to simulator to explore this distribution?')) {
                document.getElementById('dist-select').value = distType;
                showPage('simulator', document.querySelector('[onclick*="simulator"]'));
                updateSimulation();
            }
        }

        // Update simulation parameters based on selected distribution
        function updateSimulation() {
            const distType = document.getElementById('dist-select').value;
            const param1Group = document.getElementById('param1-group');
            const param2Group = document.getElementById('param2-group');
            const param1Label = document.getElementById('param1-label');
            const param2Label = document.getElementById('param2-label');
            const param1Input = document.getElementById('param1');
            const param2Input = document.getElementById('param2');

            currentDistribution = distType;

            switch(distType) {
                case 'binomial':
                    param1Label.textContent = 'Number of trials (n):';
                    param2Label.textContent = 'Success probability (p):';
                    param1Input.min = 1; param1Input.max = 100; param1Input.step = 1; param1Input.value = 20;
                    param2Input.min = 0.01; param2Input.max = 0.99; param2Input.step = 0.01; param2Input.value = 0.5;
                    param2Group.style.display = 'block';
                    break;
                case 'poisson':
                    param1Label.textContent = 'Rate (λ):';
                    param1Input.min = 0.1; param1Input.max = 20; param1Input.step = 0.1; param1Input.value = 3;
                    param2Group.style.display = 'none';
                    break;
                case 'normal':
                    param1Label.textContent = 'Mean (μ):';
                    param2Label.textContent = 'Standard deviation (σ):';
                    param1Input.min = -10; param1Input.max = 10; param1Input.step = 0.1; param1Input.value = 0;
                    param2Input.min = 0.1; param2Input.max = 5; param2Input.step = 0.1; param2Input.value = 1;
                    param2Group.style.display = 'block';
                    break;
                case 'exponential':
                    param1Label.textContent = 'Rate (λ):';
                    param1Input.min = 0.1; param1Input.max = 5; param1Input.step = 0.1; param1Input.value = 1;
                    param2Group.style.display = 'none';
                    break;
            }
        }

        // Generate sample data
        function generateSample() {
            const sampleSize = parseInt(document.getElementById('sample-size').value);
            const param1 = parseFloat(document.getElementById('param1').value);
            const param2 = parseFloat(document.getElementById('param2').value);
            
            currentData = [];
            
            switch(currentDistribution) {
                case 'binomial':
        < sampleSize; i++) {
                        currentData.push(randomBinomial(param1, param2));
                    }
                    break;
                case 'poisson':
                    for(let i = 0; i < sampleSize; i++) {
                        currentData.push(randomPoisson(param1));
                    }
                    break;
                case 'normal':
                    for(let i = 0; i < sampleSize; i++) {
                        currentData.push(randomNormal(param1, param2));
                    }
                    break;
                case 'exponential':
                    for(let i = 0; i < sampleSize; i++) {
                        currentData.push(randomExponential(param1));
                    }
                    break;
            }
            
            visualizeData();
            displayStats();
        }

        // Random number generators
        function randomBinomial(n, p) {
            let count = 0;
            for(let i = 0; i < n; i++) {
                if(Math.random() < p) count++;
            }
            return count;
        }

        function randomPoisson(lambda) {
            let k = 0;
            let p = 1.0;
            const L = Math.exp(-lambda);
            do {
                k++;
                p *= Math.random();
            } while (p > L);
            return k - 1;
        }

        function randomNormal(mean, std) {
            // Box-Muller transform
            const u1 = Math.random();
            const u2 = Math.random();
            const z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
            return z0 * std + mean;
        }

        function randomExponential(lambda) {
            return -Math.log(1 - Math.random()) / lambda;
        }

        // Visualize data as histogram
        function visualizeData() {
            const container = document.getElementById('chart-container');
            
            if(currentData.length === 0) return;
            
            // Create histogram
            const min = Math.min(...currentData);
            const max = Math.max(...currentData);
            const bins = Math.min(20, Math.max(5, Math.ceil(Math.sqrt(currentData.length))));
            const binWidth = (max - min) / bins;
            
            const histogram = new Array(bins).fill(0);
            const binCenters = [];
            
            for(let i = 0; i
